<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inconfiscable - El Camino Hacia La Libertad Financiera</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --color-trap: #E63946;
            --color-illusion: #F77F00;
            --color-break: #06A77D;
            --color-unconfiscable: #2D6A4F;
            --color-dark: #0B0E11;
            --color-text: #FFFFFF;
            --color-text-secondary: #CCCCCC;
            --color-bg-secondary: #1a1a1a;
        }

        body {
            background-color: var(--color-dark);
            color: var(--color-text);
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* ============ HERO SECTION ============ */
        .hero-section {
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
            padding: 60px 20px;
            text-align: center;
            border-bottom: 3px solid var(--color-trap);
            margin-bottom: 40px;
        }

        .hero-title {
            font-size: 3em;
            font-weight: bold;
            margin-bottom: 20px;
            background: linear-gradient(90deg, var(--color-trap), var(--color-illusion), var(--color-break), var(--color-unconfiscable));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .hero-subtitle {
            font-size: 1.2em;
            color: rgba(255, 255, 255, 0.8);
        }

        /* ============ PILARES SECTION ============ */
        .section-title {
            font-size: 2em;
            font-weight: bold;
            margin: 40px 0 30px 0;
            text-align: center;
        }

        .pillars-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 60px;
        }

        .pillar-card {
            padding: 30px;
            border-radius: 10px;
            border-left: 5px solid;
            color: white;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .pillar-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }

        .pillar-card h3 {
            font-size: 1.3em;
            margin-bottom: 15px;
        }

        .pillar-card p {
            font-size: 0.95em;
            line-height: 1.6;
        }

        .pillar-trap {
            background-color: rgba(230, 57, 70, 0.1);
            border-left-color: var(--color-trap);
        }

        .pillar-illusion {
            background-color: rgba(247, 127, 0, 0.1);
            border-left-color: var(--color-illusion);
        }

        .pillar-break {
            background-color: rgba(6, 168, 125, 0.1);
            border-left-color: var(--color-break);
        }

        .pillar-unconfiscable {
            background-color: rgba(45, 106, 79, 0.1);
            border-left-color: var(--color-unconfiscable);
        }

        /* ============ CALCULATOR SECTION ============ */
        .calculator-section {
            background-color: rgba(30, 30, 30, 0.8);
            padding: 40px;
            border-radius: 10px;
            margin: 40px 0;
            border: 2px solid var(--color-break);
        }

        .calculator-description {
            font-size: 1.1em;
            color: rgba(255, 255, 255, 0.9);
            text-align: center;
            margin-bottom: 30px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group label {
            font-weight: bold;
            margin-bottom: 8px;
            font-size: 0.95em;
        }

        .form-group input,
        .form-group select {
            padding: 12px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 5px;
            background-color: rgba(255, 255, 255, 0.05);
            color: var(--color-text);
            font-size: 1em;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: var(--color-break);
            background-color: rgba(255, 255, 255, 0.1);
        }

        .form-group input::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }

        .calculate-btn {
            grid-column: 1 / -1;
            padding: 15px 30px;
            background-color: var(--color-unconfiscable);
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 10px;
        }

        .calculate-btn:hover {
            background-color: var(--color-break);
            transform: scale(1.02);
        }

        .calculate-btn:active {
            transform: scale(0.98);
        }

        .calculate-btn:disabled {
            background-color: rgba(45, 106, 79, 0.5);
            cursor: not-allowed;
            transform: scale(1);
        }

        /* ============ RESULTS SECTION ============ */
        .results-section {
            margin: 40px 0;
            display: none;
        }

        .results-section.visible {
            display: block;
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .scenarios-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .scenario-card {
            padding: 30px;
            border-radius: 10px;
            border: 2px solid;
        }

        .scenario-card h3 {
            font-size: 1.3em;
            margin-bottom: 10px;
        }

        .scenario-card p {
            font-size: 0.9em;
            color: rgba(255, 255, 255, 0.8);
            margin-bottom: 20px;
            line-height: 1.5;
        }

        .scenario-a {
            background-color: rgba(230, 57, 70, 0.15);
            border-color: var(--color-trap);
        }

        .scenario-b {
            background-color: rgba(45, 106, 79, 0.15);
            border-color: var(--color-unconfiscable);
        }

        .metric {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            font-size: 0.95em;
        }

        .metric:last-child {
            border-bottom: none;
        }

        .metric-label {
            font-weight: 600;
        }

        .metric-value {
            color: var(--color-break);
            font-weight: bold;
        }

        .scenario-a .metric-value {
            color: var(--color-break);
        }

        /* ============ DIFFERENCE PANEL ============ */
        .difference-panel {
            background-color: rgba(45, 106, 79, 0.2);
            padding: 20px;
            border-radius: 10px;
            border-left: 5px solid var(--color-unconfiscable);
            margin: 20px 0;
            display: none;
        }

        .difference-panel.visible {
            display: block;
            animation: fadeIn 0.5s ease-in;
        }

        .difference-panel h3 {
            color: var(--color-break);
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .difference-value {
            font-size: 1.5em;
            color: var(--color-break);
            font-weight: bold;
            margin-bottom: 10px;
        }

        .difference-description {
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.95em;
        }

        /* ============ PURCHASES TABLE ============ */
        .purchases-panel {
            background-color: rgba(30, 30, 30, 0.5);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            display: none;
        }

        .purchases-panel.visible {
            display: block;
            animation: fadeIn 0.5s ease-in;
        }

        .purchases-panel h3 {
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        .purchases-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.9em;
        }

        .purchases-table thead {
            background-color: rgba(45, 106, 79, 0.3);
        }

        .purchases-table th {
            padding: 10px;
            text-align: left;
            font-weight: bold;
            border-bottom: 2px solid var(--color-break);
        }

        .purchases-table td {
            padding: 10px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .purchases-table tbody tr:hover {
            background-color: rgba(45, 106, 79, 0.1);
        }

        /* ============ INFO SECTION ============ */
        .info-section {
            background-color: rgba(30, 30, 30, 0.5);
            padding: 30px;
            border-radius: 10px;
            margin: 40px 0;
            border-left: 5px solid var(--color-break);
        }

        .info-section h3 {
            font-size: 1.3em;
            margin-bottom: 15px;
            color: var(--color-break);
        }

        .info-section h4 {
            font-size: 1.1em;
            margin: 20px 0 10px 0;
            color: var(--color-text);
        }

        .info-section ul {
            margin-left: 20px;
            margin-bottom: 15px;
        }

        .info-section li {
            margin-bottom: 8px;
            color: rgba(255, 255, 255, 0.9);
        }

        .info-section p {
            color: rgba(255, 255, 255, 0.8);
            margin-bottom: 15px;
            line-height: 1.7;
        }

        /* ============ CTA SECTION ============ */
        .cta-section {
            background: linear-gradient(135deg, rgba(45, 106, 79, 0.2), rgba(6, 168, 125, 0.2));
            border: 2px solid var(--color-break);
            border-radius: 10px;
            padding: 40px;
            text-align: center;
            margin: 40px 0;
        }

        .cta-section h2 {
            color: var(--color-break);
            font-size: 1.8em;
            margin-bottom: 10px;
        }

        .cta-section p {
            color: rgba(255, 255, 255, 0.9);
            font-size: 1.1em;
            margin-bottom: 30px;
        }

        .cta-form {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            max-width: 600px;
            margin: 0 auto;
        }

        .cta-form input {
            padding: 12px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 5px;
            background-color: rgba(255, 255, 255, 0.05);
            color: var(--color-text);
            font-size: 1em;
        }

        .cta-form input:focus {
            outline: none;
            border-color: var(--color-break);
            background-color: rgba(255, 255, 255, 0.1);
        }

        .cta-form input::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }

        .cta-submit {
            grid-column: 1 / -1;
            padding: 12px 30px;
            background-color: var(--color-unconfiscable);
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .cta-submit:hover {
            background-color: var(--color-break);
        }

        /* ============ FOOTER ============ */
        .footer {
            text-align: center;
            padding: 40px 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            margin-top: 60px;
            color: rgba(255, 255, 255, 0.7);
        }

        .footer p {
            margin: 5px 0;
        }

        .footer p:last-child {
            font-size: 0.9em;
            color: rgba(255, 255, 255, 0.5);
            margin-top: 15px;
        }

        /* ============ LOADING STATE ============ */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: var(--color-break);
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* ============ ERROR MESSAGE ============ */
        .error-message {
            background-color: rgba(230, 57, 70, 0.2);
            border: 1px solid var(--color-trap);
            border-radius: 5px;
            padding: 15px;
            margin: 20px 0;
            color: #ff6b6b;
            display: none;
        }

        .error-message.visible {
            display: block;
        }

        /* ============ SUCCESS MESSAGE ============ */
        .success-message {
            background-color: rgba(6, 168, 125, 0.2);
            border: 1px solid var(--color-break);
            border-radius: 5px;
            padding: 15px;
            margin: 20px 0;
            color: var(--color-break);
            display: none;
        }

        .success-message.visible {
            display: block;
        }

        /* ============ RESPONSIVE ============ */
        @media (max-width: 768px) {
            .hero-title {
                font-size: 2em;
            }

            .hero-subtitle {
                font-size: 1em;
            }

            .section-title {
                font-size: 1.5em;
            }

            .pillars-grid {
                grid-template-columns: 1fr;
            }

            .form-grid {
                grid-template-columns: 1fr;
            }

            .scenarios-grid {
                grid-template-columns: 1fr;
            }

            .cta-form {
                grid-template-columns: 1fr;
            }

            .calculator-section {
                padding: 20px;
            }

            .info-section {
                padding: 20px;
            }

            .cta-section {
                padding: 20px;
            }

            .purchases-table {
                font-size: 0.8em;
            }

            .purchases-table th,
            .purchases-table td {
                padding: 8px 5px;
            }
        }

        @media (max-width: 480px) {
            .hero-title {
                font-size: 1.5em;
            }

            .section-title {
                font-size: 1.2em;
            }

            .pillar-card {
                padding: 20px;
            }

            .calculator-section {
                padding: 15px;
                border: 1px solid var(--color-break);
            }

            .form-group label {
                font-size: 0.85em;
            }

            .metric {
                font-size: 0.85em;
            }

            .difference-value {
                font-size: 1.2em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- HERO SECTION -->
        <div class="hero-section">
            <h1 class="hero-title">El Camino Hacia Lo Inconfiscable</h1>
            <p class="hero-subtitle">Descubre c√≥mo escapar del control del sistema financiero tradicional</p>
        </div>

        <!-- PILARES SECTION -->
        <h2 class="section-title">Los Cuatro Pilares del Viaje</h2>
        <div class="pillars-grid">
            <div class="pillar-card pillar-trap">
                <h3>üî¥ La Trampa</h3>
                <p>Fondos en exchanges centralizados son confiscables. Trazabilidad 100%. El Estado sabe cu√°ndo, c√≥mo y cu√°nto compraste.</p>
            </div>
            <div class="pillar-card pillar-illusion">
                <h3>üü† La Ilusi√≥n</h3>
                <p>Autocustodia previene confiscaci√≥n inmediata, PERO la trazabilidad permanece. Las autoridades saben que lo tienes.</p>
            </div>
            <div class="pillar-card pillar-break">
                <h3>üîµ La Ruptura</h3>
                <p>Compra Token DM2. Intercambia USDC por DM2. Rompe la trazabilidad onchain anonimizando tus fondos.</p>
            </div>
            <div class="pillar-card pillar-unconfiscable">
                <h3>üü¢ Lo Inconfiscable</h3>
                <p>Rompe la trazabilidad. Obt√©n verdadera privacidad y control total. Tus activos descentralizados. Solo t√∫ los controlas.</p>
            </div>
        </div>

        <!-- CALCULATOR SECTION -->
        <h2 class="section-title">Simula Tu Futuro Inconfiscable</h2>
        <div class="calculator-section">
            <p class="calculator-description">Descubre la diferencia entre comprar Bitcoin de forma tradicional (atrapado en el sistema) versus de forma an√≥nima y descentralizada (verdaderamente inconfiscable).</p>
            
            <div class="form-grid">
                <div class="form-group">
                    <label for="date_start">üìÖ Fecha de inicio de tu inversi√≥n</label>
                    <input type="date" id="date_start" value="2020-01-01" min="2011-01-01">
                </div>

                <div class="form-group">
                    <label for="amount_input">üíµ Cantidad a comprar peri√≥dicamente (USD)</label>
                    <input type="number" id="amount_input" value="500" min="10" step="10">
                </div>

                <div class="form-group">
                    <label for="frequency_select">üìä Frecuencia de recompras</label>
                    <select id="frequency_select">
                        <option value="Diaria">Diaria</option>
                        <option value="Semanal" selected>Semanal</option>
                        <option value="Mensual">Mensual</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="future_price_input">üéØ Precio futuro de Bitcoin (USD)</label>
                    <input type="number" id="future_price_input" value="100000" min="1000" step="1000">
                </div>

                <div class="form-group">
                    <label for="date_future">üìÖ Fecha en que alcanzar√° ese precio</label>
                    <input type="date" id="date_future" value="2030-01-01" min="2025-01-01" max="2050-12-31">
                </div>

                <button class="calculate-btn" id="calculate_btn">üöÄ Simular Mi Futuro Inconfiscable</button>
            </div>

            <div class="error-message" id="error_message"></div>
            <div class="success-message" id="success_message"></div>
        </div>

        <!-- RESULTS SECTION -->
        <div class="results-section" id="results_section">
            <h2 class="section-title">üìä Resultados Comparativos</h2>

            <div class="scenarios-grid">
                <div class="scenario-card scenario-a">
                    <h3>üî¥ Escenario A: La Trampa</h3>
                    <p>Compra tradicional a trav√©s de exchange centralizado. El Estado controla tu informaci√≥n. Atrapado en el sistema.</p>
                    
                    <div class="metric">
                        <span class="metric-label">Inversi√≥n Total</span>
                        <span class="metric-value" id="scenario_a_investment">$0</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Bitcoin Acumulado</span>
                        <span class="metric-value" id="scenario_a_btc">0 BTC</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Valor Bruto</span>
                        <span class="metric-value" id="scenario_a_gross">$0</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Impuestos (25%)</span>
                        <span class="metric-value" id="scenario_a_taxes">-$0</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Valor Neto</span>
                        <span class="metric-value" id="scenario_a_net">$0</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Rentabilidad</span>
                        <span class="metric-value" id="scenario_a_roi">0%</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">CAGR</span>
                        <span class="metric-value" id="scenario_a_cagr">0%</span>
                    </div>
                </div>

                <div class="scenario-card scenario-b">
                    <h3>üü¢ Escenario B: Lo Inconfiscable</h3>
                    <p>Compra an√≥nima, descentralizada y autocustodiada. Nadie sabe cu√°nto tienes. Verdadera libertad financiera.</p>
                    
                    <div class="metric">
                        <span class="metric-label">Inversi√≥n Total</span>
                        <span class="metric-value" id="scenario_b_investment">$0</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Bitcoin Acumulado</span>
                        <span class="metric-value" id="scenario_b_btc">0 BTC</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Valor Bruto</span>
                        <span class="metric-value" id="scenario_b_gross">$0</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Impuestos</span>
                        <span class="metric-value" id="scenario_b_taxes">$0</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Valor Neto</span>
                        <span class="metric-value" id="scenario_b_net">$0</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Rentabilidad</span>
                        <span class="metric-value" id="scenario_b_roi">0%</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">CAGR</span>
                        <span class="metric-value" id="scenario_b_cagr">0%</span>
                    </div>
                </div>
            </div>

            <div class="difference-panel" id="difference_panel">
                <h3>üí∞ Tu Ventaja Por Ser Inconfiscable</h3>
                <div class="difference-value" id="difference_value">$0</div>
                <p class="difference-description">Esto es lo que ahorras en impuestos y lo que ganas por no estar atrapado en el sistema.</p>
            </div>

            <div class="purchases-panel" id="purchases_panel">
                <h3>üìã Detalle de Compras</h3>
                <p id="purchases_count">Total de compras realizadas: 0</p>
                <table class="purchases-table" id="purchases_table" style="display: none;">
                    <thead>
                        <tr>
                            <th>Fecha</th>
                            <th>Precio BTC</th>
                            <th>Inversi√≥n</th>
                            <th>BTC Comprado</th>
                        </tr>
                    </thead>
                    <tbody id="purchases_tbody">
                    </tbody>
                </table>
            </div>
        </div>

        <!-- INFO SECTION -->
        <div class="info-section">
            <h3>üéØ Opciones Como Ser Inconfiscable</h3>
            
            <h4>Vivir de tus Bitcoin sin venderlos</h4>
            <p>Una vez que eres inconfiscable, tienes opciones que los atrapados en el sistema no tienen:</p>
            
            <h4>Pr√©stamo Pignorado</h4>
            <p>Puedes usar tus Bitcoin como colateral para obtener un pr√©stamo en USD o stablecoins, sin necesidad de venderlos. Esto significa:</p>
            <ul>
                <li><strong>Mantener tu exposici√≥n a Bitcoin:</strong> Tus BTC siguen creciendo mientras usas el dinero del pr√©stamo</li>
                <li><strong>Vivir del pr√©stamo:</strong> Usa los fondos para tus gastos diarios</li>
                <li><strong>Pagar intereses bajos:</strong> Plataformas DeFi ofrecen tasas mucho menores que bancos tradicionales</li>
                <li><strong>Sin confiscaci√≥n:</strong> Nadie puede quitarte tus Bitcoin porque est√°n en tu autocustodia</li>
                <li><strong>Privacidad total:</strong> Tus transacciones no est√°n vinculadas a tu identidad</li>
            </ul>

            <h4>Comparaci√≥n con el Escenario A (La Trampa)</h4>
            <p>Si estuvieras atrapado en el sistema tradicional:</p>
            <ul>
                <li><strong>Tendr√≠as que vender</strong> para acceder a tu dinero (pagando impuestos sobre ganancias)</li>
                <li><strong>El Estado sabr√≠a</strong> exactamente cu√°ndo y cu√°nto vendiste</li>
                <li><strong>Estar√≠as vigilado</strong> en cada transacci√≥n</li>
                <li><strong>No tendr√≠as privacidad</strong> financiera real</li>
                <li><strong>Tus fondos estar√≠an en riesgo</strong> de confiscaci√≥n</li>
            </ul>

            <h4>La Libertad Financiera Real</h4>
            <p>Ser inconfiscable significa:</p>
            <ul>
                <li><strong>Control total</strong> sobre tus activos</li>
                <li><strong>Privacidad financiera</strong> completa</li>
                <li><strong>Libertad</strong> para hacer lo que quieras con tu dinero</li>
                <li><strong>Protecci√≥n</strong> contra la confiscaci√≥n y el control estatal</li>
                <li><strong>Oportunidades</strong> que el sistema tradicional nunca te dar√°</li>
            </ul>
        </div>

        <!-- CTA SECTION -->
        <div class="cta-section">
            <h2>üîê Comienza Tu Viaje Hacia Lo Inconfiscable</h2>
            <p>Recibe una secuencia de correos explic√°ndote los 4 pasos para hacerte verdaderamente inconfiscable.</p>
            
            <form class="cta-form" id="cta_form" onsubmit="handleSubscribe(event)">
                <input type="email" id="email_input" placeholder="tu@email.com" required>
                <input type="text" id="name_input" placeholder="Tu nombre (opcional)">
                <button type="submit" class="cta-submit">üì¨ Recibir la Secuencia de Correos</button>
            </form>
        </div>
    </div>

    <!-- FOOTER -->
    <div class="footer">
        <p>¬© 2024 Inconfiscable - El Camino Hacia La Libertad Financiera</p>
        <p>Disclaimer: Esta herramienta es solo educativa. No es asesoramiento financiero. Consulta con profesionales antes de tomar decisiones de inversi√≥n.</p>
    </div>

    <script>
        // Utilidades
        function formatCurrency(value) {
            return new Intl.NumberFormat('es-ES', {
                style: 'currency',
                currency: 'USD',
                minimumFractionDigits: 2,
                maximumFractionDigits: 2
            }).format(value);
        }

        function formatBTC(value) {
            return value.toFixed(8);
        }

        function showError(message) {
            const errorDiv = document.getElementById('error_message');
            errorDiv.textContent = '‚ùå ' + message;
            errorDiv.classList.add('visible');
            setTimeout(() => {
                errorDiv.classList.remove('visible');
            }, 5000);
        }

        function showSuccess(message) {
            const successDiv = document.getElementById('success_message');
            successDiv.textContent = '‚úÖ ' + message;
            successDiv.classList.add('visible');
            setTimeout(() => {
                successDiv.classList.remove('visible');
            }, 5000);
        }

        // Event Listeners
        document.getElementById('calculate_btn').addEventListener('click', calculateSimulation);
        document.getElementById('cta_form').addEventListener('submit', handleSubscribe);

        async function calculateSimulation() {
            try {
                const btn = document.getElementById('calculate_btn');
                const startDate = document.getElementById('date_start').value;
                const endDate = document.getElementById('date_future').value;
                const amount = parseFloat(document.getElementById('amount_input').value);
                const frequency = document.getElementById('frequency_select').value;
                const futurePrice = parseFloat(document.getElementById('future_price_input').value);

                // Validar
                if (!startDate || !endDate || !amount || !futurePrice) {
                    showError('Por favor, completa todos los campos');
                    return;
                }

                if (new Date(startDate) >= new Date(endDate)) {
                    showError('La fecha de inicio debe ser anterior a la fecha futura');
                    return;
                }

                // Mostrar loading
                btn.disabled = true;
                btn.textContent = '‚è≥ Calculando...';

                // Llamar al servidor
                const result = await anvil.server.call('full_simulation',
                    startDate,
                    endDate,
                    amount,
                    frequency,
                    futurePrice,
                    endDate
                );

                if (result.success) {
                    displayResults(result);
                } else {
                    showError(result.error || 'Error desconocido');
                }

            } catch (error) {
                showError('Error: ' + error.message);
            } finally {
                const btn = document.getElementById('calculate_btn');
                btn.disabled = false;
                btn.textContent = 'üöÄ Simular Mi Futuro Inconfiscable';
            }
        }

        function displayResults(result) {
            const btc = result.btc_accumulated;
            const invested = result.total_invested;
            const scenarioA = result.scenario_a;
            const scenarioB = result.scenario_b;

            // Escenario A
            document.getElementById('scenario_a_investment').textContent = formatCurrency(invested);
            document.getElementById('scenario_a_btc').textContent = formatBTC(btc) + ' BTC';
            document.getElementById('scenario_a_gross').textContent = formatCurrency(scenarioA.gross_value);
            document.getElementById('scenario_a_taxes').textContent = '-' + formatCurrency(scenarioA.taxes);
            document.getElementById('scenario_a_net').textContent = formatCurrency(scenarioA.net_value);
            document.getElementById('scenario_a_roi').textContent = scenarioA.roi.toFixed(2) + '%';
            document.getElementById('scenario_a_cagr').textContent = scenarioA.cagr.toFixed(2) + '%';

            // Escenario B
            document.getElementById('scenario_b_investment').textContent = formatCurrency(invested);
            document.getElementById('scenario_b_btc').textContent = formatBTC(btc) + ' BTC';
            document.getElementById('scenario_b_gross').textContent = formatCurrency(scenarioB.gross_value);
            document.getElementById('scenario_b_taxes').textContent = '$0';
            document.getElementById('scenario_b_net').textContent = formatCurrency(scenarioB.net_value);
            document.getElementById('scenario_b_roi').textContent = scenarioB.roi.toFixed(2) + '%';
            document.getElementById('scenario_b_cagr').textContent = scenarioB.cagr.toFixed(2) + '%';

            // Diferencia
            document.getElementById('difference_value').textContent = formatCurrency(result.difference);
            document.getElementById('difference_panel').classList.add('visible');

            // Compras
            if (result.purchases && result.purchases.length > 0) {
                document.getElementById('purchases_count').textContent = 'Total de compras realizadas: ' + result.purchases.length;
                
                const tbody = document.getElementById('purchases_tbody');
                tbody.innerHTML = '';
                
                result.purchases.forEach(purchase => {
                    const row = tbody.insertRow();
                    row.innerHTML = `
                        <td>${purchase.date}</td>
                        <td>${formatCurrency(purchase.price)}</td>
                        <td>${formatCurrency(purchase.amount_usd)}</td>
                        <td>${formatBTC(purchase.btc_bought)}</td>
                    `;
                });
                
                document.getElementById('purchases_table').style.display = 'table';
                document.getElementById('purchases_panel').classList.add('visible');
            }

            // Mostrar resultados
            document.getElementById('results_section').classList.add('visible');
            
            // Scroll a resultados
            setTimeout(() => {
                document.getElementById('results_section').scrollIntoView({ behavior: 'smooth' });
            }, 100);
        }

        function handleSubscribe(event) {
            event.preventDefault();
            const email = document.getElementById('email_input').value;
            const name = document.getElementById('name_input').value;

            if (!email || !email.includes('@')) {
                showError('Por favor, ingresa un email v√°lido');
                return;
            }

            // Aqu√≠ ir√≠a la integraci√≥n con Moosend
            showSuccess('¬°Gracias! Revisa tu email para confirmar tu suscripci√≥n.');
            document.getElementById('cta_form').reset();
        }
    </script>
</body>
</html>
